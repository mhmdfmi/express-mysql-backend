<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸ“˜ API Documentation</title>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        background: #0f172a;
        color: #f8fafc;
        padding: 2rem;
        margin: 0;
        line-height: 1.6;
      }
      h1,
      h2 {
        text-align: center;
        color: #3b82f6;
      }
      .section {
        margin: 2rem 0;
        padding: 1.5rem;
        background: #1e293b;
        border-radius: 0.75rem;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.2);
        animation: fadeIn 0.6s ease;
      }
      .endpoint {
        font-weight: bold;
        color: #22d3ee;
        margin-bottom: 0.25rem;
      }
      .method {
        background: #22c55e;
        padding: 0.2rem 0.6rem;
        border-radius: 0.4rem;
        font-size: 0.8rem;
        color: #0f172a;
        margin-right: 0.5rem;
      }
      .method.delete {
        background: #ef4444;
      }
      .method.put {
        background: #f59e42;
      }
      .method.get {
        background: #3b82f6;
      }
      code {
        background: #334155;
        padding: 0.3rem 0.6rem;
        border-radius: 0.5rem;
        font-size: 0.9rem;
        color: #facc15;
        display: block;
        margin: 0.5rem 0;
        white-space: pre-wrap;
      }
      @media (max-width: 600px) {
        body {
          padding: 1rem;
        }
        .section {
          padding: 1rem;
        }
      }
    </style>
  </head>
  <body>
    <h1>ðŸ“˜ API Documentation</h1>
    <p style="text-align: center; color: #cbd5e1">
      Welcome to the documentation for your Express MySQL Backend API.<br />
      Below you'll find available endpoints and usage examples.
    </p>

    <div class="section">
      <h2>Authentication</h2>
      <p class="endpoint">
        <span class="method post">POST</span> /api/v1/users/auth/register
      </p>
      <p>Register a new user.</p>
      <code>
        POST /api/v1/users/auth/register Content-Type: application/json {
        "name": "John Doe", "email": "john@example.com", "password":
        "password123" }
      </code>

      <p class="endpoint">
        <span class="method post">POST</span> /api/v1/users/auth/login
      </p>
      <p>Login and get JWT token.</p>
      <code>
        POST /api/v1/users/auth/login Content-Type: application/json { "email":
        "john@example.com", "password": "password123" }
      </code>
      <p>Response:</p>
      <code>
        { "statusCode": 200, "message": "Login successful", "data": { "token":
        "..." } }
      </code>
    </div>

    <div class="section">
      <h2>Users</h2>
      <p class="endpoint"><span class="method get">GET</span> /api/v1/users</p>
      <p>Get paginated users. <b>Requires Authorization header</b>.</p>
      <code>
        GET /api/v1/users?page=1&pageSize=20 Headers: Authorization: Bearer
        &lt;token&gt;
      </code>

      <p class="endpoint">
        <span class="method get">GET</span> /api/v1/users/all
      </p>
      <p>
        Get all users (no pagination). <b>Requires Authorization header</b>.
      </p>
      <code>
        GET /api/v1/users/all Headers: Authorization: Bearer &lt;token&gt;
      </code>

      <p class="endpoint">
        <span class="method put">PUT</span> /api/v1/users/me
      </p>
      <p>Update your own profile. <b>Requires Authorization header</b>.</p>
      <code>
        PUT /api/v1/users/me Headers: Authorization: Bearer &lt;token&gt;
        Content-Type: application/json { "name": "New Name", "email":
        "new@email.com", "password": "newpassword" }
      </code>

      <p class="endpoint">
        <span class="method delete">DELETE</span> /api/v1/users/me
      </p>
      <p>Delete your own account. <b>Requires Authorization header</b>.</p>
      <code>
        DELETE /api/v1/users/me Headers: Authorization: Bearer &lt;token&gt;
      </code>

      <p class="endpoint">
        <span class="method put">PUT</span> /api/v1/users/:id
      </p>
      <p>Admin only: Update role of another user.</p>
      <code>
        PUT /api/v1/users/2 Headers: Authorization: Bearer &lt;admin-token&gt;
        Content-Type: application/json { "role": "admin" }
      </code>

      <p class="endpoint">
        <span class="method delete">DELETE</span> /api/v1/users/:id
      </p>
      <p>Admin only: Delete another user.</p>
      <code>
        DELETE /api/v1/users/2 Headers: Authorization: Bearer
        &lt;admin-token&gt;
      </code>
    </div>

    <div class="section">
      <h2>Products</h2>
      <p class="endpoint">
        <span class="method get">GET</span> /api/v1/products
      </p>
      <p>Get paginated products.</p>
      <code> GET /api/v1/products?page=1&pageSize=10 </code>

      <p class="endpoint">
        <span class="method get">GET</span> /api/v1/products/all
      </p>
      <p>Get all products (no pagination).</p>
      <code> GET /api/v1/products/all </code>

      <p class="endpoint">
        <span class="method get">GET</span> /api/v1/products/:id
      </p>
      <p>Get product by ID.</p>
      <code> GET /api/v1/products/1 </code>

      <p class="endpoint">
        <span class="method post">POST</span> /api/v1/products
      </p>
      <p>
        Create product (with optional image).
        <b>Requires Authorization header</b>.
      </p>
      <code>
        POST /api/v1/products Headers: Authorization: Bearer &lt;token&gt;
        Content-Type: multipart/form-data Fields: name: "Product Name" price:
        "1000.00" description: "Description" image: (file, optional)
      </code>

      <p class="endpoint">
        <span class="method put">PUT</span> /api/v1/products/:id
      </p>
      <p>
        Update product (with optional image).
        <b>Requires Authorization header</b>.
      </p>
      <code>
        PUT /api/v1/products/1 Headers: Authorization: Bearer &lt;token&gt;
        Content-Type: multipart/form-data Fields: name: "New Name" price:
        "2000.00" description: "Updated description" image: (file, optional)
      </code>

      <p class="endpoint">
        <span class="method delete">DELETE</span> /api/v1/products/:id
      </p>
      <p>Delete product. <b>Requires Authorization header</b>.</p>
      <code>
        DELETE /api/v1/products/1 Headers: Authorization: Bearer &lt;token&gt;
      </code>
    </div>

    <div class="section">
      <h2>Image Access</h2>
      <p>All uploaded product images can be accessed via:</p>
      <code> GET /uploads/&lt;filename&gt; </code>
      <p>Example:</p>
      <code>
        <img
          src="http://localhost:3001/uploads/default.jpg"
          alt="Product Image"
          width="100"
          height="100"
        />
      </code>
    </div>

    <div class="section">
      <h2>Example: Fetch Products with Image (JavaScript)</h2>
      <code>
        fetch('/api/v1/products') .then(res => res.json()) .then(data => {
        data.data.forEach(product => { const img =
        document.createElement('img'); img.src = product.image_url ?
        product.image_url : '/uploads/default.jpg'; img.width = 200; // atur
        lebar img.height = 200; // atur tinggi img.style.objectFit = "cover";
        img.style.borderRadius = "0.5rem"; document.body.appendChild(img); });
        });
      </code>
    </div>
  </body>
</html>
